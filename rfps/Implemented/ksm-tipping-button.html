<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-rfps/Implemented/ksm-tipping-button">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Tip or Donate KSM Embeddable Button | Web3 Foundation Grants</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://w3f.github.io/grants/rfps/Implemented/ksm-tipping-button"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Tip or Donate KSM Embeddable Button | Web3 Foundation Grants"><meta data-rh="true" name="description" content="Status:* Implemented"><meta data-rh="true" property="og:description" content="Status:* Implemented"><link data-rh="true" rel="icon" href="/grants/img/Web3Foundation.png"><link data-rh="true" rel="canonical" href="https://w3f.github.io/grants/rfps/Implemented/ksm-tipping-button"><link data-rh="true" rel="alternate" href="https://w3f.github.io/grants/rfps/Implemented/ksm-tipping-button" hreflang="en"><link data-rh="true" rel="alternate" href="https://w3f.github.io/grants/rfps/Implemented/ksm-tipping-button" hreflang="x-default"><link rel="stylesheet" href="/grants/assets/css/styles.987ab5af.css">
<link rel="preload" href="/grants/assets/js/runtime~main.5263c83a.js" as="script">
<link rel="preload" href="/grants/assets/js/main.7e89d58a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#E6007A;color:#ffffff" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><h4>Check out <a target="_blank" rel="noopener noreferrer" href="https://web3.bamboohr.com/jobs/">our current job openings</a>!</h4></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/grants/"><div class="navbar__logo"><img src="/grants/img/Web3Foundation.png" alt="W3F Grants Program" class="themedImage_ToTc themedImage--light_HNdA"><img src="/grants/img/Web3Foundation.png" alt="W3F Grants Program" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">W3F Grants Program</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/grants/apply">Apply</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/grants/Introduction">Introduction</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/grants/Applications">List of Grants</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/grants/FAQ">FAQ</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/grants/Contribute">Contribute</a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/grants/apply">Apply</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/grants/Introduction">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/grants/Process">Application Process</a><button aria-label="Toggle the collapsible sidebar category &#x27;Application Process&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/grants/Applications">Applications</a><button aria-label="Toggle the collapsible sidebar category &#x27;Applications&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/grants/suggesting">Suggesting a Project</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/grants/maintenance">Maintenance Grants</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/grants/help">Help</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/grants/funding">Alternative Funding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/grants/Contribute">Contribute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/grants/FAQ">FAQ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/grants/Support Docs/T&amp;Cs">Support Docs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/grants/rfps">Requests for Proposals</a><button aria-label="Toggle the collapsible sidebar category &#x27;Requests for Proposals&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/grants/rfps/Implemented/appi">Implemented</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/grants/rfps/Implemented/appi">APPI: Auto-funded public P2P infrastructure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/grants/rfps/Implemented/candle-auction">Candle auction smart contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/grants/rfps/Implemented/ksm-tipping-button">Tip or Donate KSM Embeddable Button</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/grants/rfps/Implemented/on-chain-quadratic-funding">On-chain Quadratic Funding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/grants/rfps/Implemented/php-api">PHP Substrate API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/grants/rfps/Implemented/php-scale">PHP Version of SCALE Codec</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/grants/rfps/Implemented/staking-rewards-collector-front-end">Front-End for Staking Rewards Collector</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/grants/rfps/Open/ISO_20022">Open</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/grants/rfps/Under Development/ISO_8583">Under Development</a></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/grants/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/grants/rfps"><span itemprop="name">Requests for Proposals</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Implemented</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Tip or Donate KSM Embeddable Button</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Tip or Donate KSM Embeddable Button</h1><ul><li><strong>Status:</strong> <a href="https://github.com/Shard-Labs/kusama-tips-widget" target="_blank" rel="noopener noreferrer">Implemented</a></li><li><strong>Proposer:</strong> swader</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="project-description-">Project Description 📄<a class="hash-link" href="#project-description-" title="Direct link to heading">​</a></h2><p>This is a request for proposals to build an embeddable self-contained &quot;Propose tip or Donate KSM&quot; button for websites.</p><p>The applying team is more than welcome to apply through <a href="https://github.com/w3f/Open-Grants-Program" target="_blank" rel="noopener noreferrer">open grants</a>, or <a href="https://wiki.polkadot.network/docs/en/learn-treasury#creating-a-treasury-proposal" target="_blank" rel="noopener noreferrer">the Kusama Treasury itself</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-tipping-system">The Tipping System<a class="hash-link" href="#the-tipping-system" title="Direct link to heading">​</a></h2><p>Most Substrate-based chains like Polkadot and Kusama have an on-chain treasury. This treasury is filled from transaction fees, slashes, inflation, and donations. The treasury supports three different disbursement mechanisms: proposals, bounties, and tips. This RFP deals with Tips.</p><p>Anyone can propose a tip. The proposer becomes the finder, and receives a small fee if the tip is accepted. The Council votes on the tip by members seconding it with an arbitrary amount. The final amount to pay out is the median of all the amounts given by all Council members.</p><p>The tip begins its closing process (a countdown) when more than a half of councilors have seconded a tip. During this countdown, the remaining members can still submit their tips, but don&#x27;t have to. After the countdown has elapsed, the <code>close_tip</code> extrinsic has to be called (by anyone) to perform the actual payout.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proposal">Proposal<a class="hash-link" href="#proposal" title="Direct link to heading">​</a></h2><p>The Kusama Tip Button sould be a standalone embeddable snippet of HTML and JS code. When added to a website, a &quot;Tip or Donate KSM&quot; button should show, text customizable by website owner.</p><p>Before the user interacts with the button, the button&#x27;s embedded code should:</p><ol><li>Sanitize the current URL (remove UTM, hashes, alphabetically order query params, etc.)</li><li>Convert this URL to bytes</li><li>Check if a tip for the same URL already exists and IS ACTIVE (past tips for the same URL are OK)<ul><li>if yes, grey out button and make it unavailable with the text &quot;Tip already pending - click to see&quot;, linking to <a href="http://kusama.dotapps.io/#/treasury/tips" target="_blank" rel="noopener noreferrer">http://kusama.dotapps.io/#/treasury/tips</a> (text customizable by website owner)</li><li>if no, button is available.</li></ul></li></ol><p>Once clicked, the button should:</p><ul><li>ask for permission to connect to PolkadotJS extension<ul><li>if none is present, offer to install it (take user to Github page)</li><li>if allowed, a popup appears asking to &quot;select an account&quot;</li><li>if denied, cancel all</li></ul></li><li>offer two options: Propose Tip and Donate Directly (text customizable by website owner)<ul><li>Propose Tip<ul><li>clearly inform visitor that they need to have enough funds for both a fee AND a deposit, and that they will only get the deposit back after the tip has been paid out, which doesn&#x27;t have to ever happen.</li><li>if current user is a Council member, ask for amount and then create a new Tip entry with treasury.tip_new</li><li>if current user is not in Council, create a new Tip entry with treasury.report_awesome. </li><li>Optionally allow visitor to attach a message. If provided, use utility.batch to batch the tip creation with system.remark. Final system remark is: &quot;Tip for URL: MESSAGE FROM TIPPER&quot;.</li><li>re-execute &quot;tip exists&quot; check to disable button and link to Tips page in treasury</li></ul></li><li>Donate<ul><li>ask visitor for amount</li><li>wrap Transfer in utility.batch function along with a system.remark. (not optional, always wrap)</li><li>allow visitor to enter a custom note</li><li>final system remark is &quot;Donation for URL: MESSAGE FROM TIPPER&quot;.</li></ul></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="challenges">Challenges<a class="hash-link" href="#challenges" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a class="hash-link" href="#performance" title="Direct link to heading">​</a></h3><p>Websites must not be notably slowed down by this implementation. This is especially challenging because the button&#x27;s code needs to do some checking well before a visitor interacts with it. Gating the approach more (i.e. behind an additional &quot;Tipping&quot; button) would degrade UX, especially if the click requires a long load and check time before even allowing progress into the Tip or Donate area.</p><p>Ideally, the code would be a minimal extraction of PolkadotJS API, or even slimmer standalone version, which could do the check painlessly. The tipping code itself can then be bigger and be async loaded only once a visitor interacts with the button. We assume the vast majority of users never will, so this is an acceptable tradeoff, but we welcome creative solutions to this problem.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tip-spam">Tip Spam<a class="hash-link" href="#tip-spam" title="Direct link to heading">​</a></h3><p>It is reasonable to assume that highly popular websites will, in time, have many users wanting to create tips for them. The tip-existence check helps with that, but it does not help with minor URL modifications (i.e. no-effect query params) or tipping every page on a website.</p><p>The fee and deposit to create a Tip should take care of this problem.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/grants/rfps/Implemented/candle-auction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Candle auction smart contract</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/grants/rfps/Implemented/on-chain-quadratic-funding"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">On-chain Quadratic Funding</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#project-description-" class="table-of-contents__link toc-highlight">Project Description 📄</a></li><li><a href="#the-tipping-system" class="table-of-contents__link toc-highlight">The Tipping System</a></li><li><a href="#proposal" class="table-of-contents__link toc-highlight">Proposal</a></li><li><a href="#challenges" class="table-of-contents__link toc-highlight">Challenges</a><ul><li><a href="#performance" class="table-of-contents__link toc-highlight">Performance</a></li><li><a href="#tip-spam" class="table-of-contents__link toc-highlight">Tip Spam</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/w3f/Grants-Program" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://web3.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/Web3foundation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/Web3foundation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grants Program Matrix channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Web3 Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/grants/assets/js/runtime~main.5263c83a.js"></script>
<script src="/grants/assets/js/main.7e89d58a.js"></script>
</body>
</html>