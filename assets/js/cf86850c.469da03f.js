"use strict";(self.webpackChunkgrants=self.webpackChunkgrants||[]).push([[3523],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),m=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=m(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=m(n),h=i,k=u["".concat(s,".").concat(h)]||u[h]||d[h]||l;return n?a.createElement(k,r(r({ref:t},p),{},{components:n})):a.createElement(k,r({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,r=new Array(l);r[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,r[1]=o;for(var m=2;m<l;m++)r[m]=n[m];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},17220:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>r,default:()=>p,frontMatter:()=>l,metadata:()=>o,toc:()=>s});var a=n(87462),i=(n(67294),n(3905));const l={},r="Subsembly - Support for GRANDPA",o={unversionedId:"Applications/Subsembly-GRANDPA",id:"Applications/Subsembly-GRANDPA",isDocsHomePage:!1,title:"Subsembly - Support for GRANDPA",description:"* Team Name: LimeChain",source:"@site/docs/Applications/Subsembly-GRANDPA.md",sourceDirName:"Applications",slug:"/Applications/Subsembly-GRANDPA",permalink:"/grants-test-repository/docs/Applications/Subsembly-GRANDPA",editUrl:"https://github.com/w3f/grants-test-repository/edit/master/docs/Applications/Subsembly-GRANDPA.md",tags:[],version:"current",lastUpdatedBy:"Sebastian M\xfcller",lastUpdatedAt:1668007993,formattedLastUpdatedAt:"11/9/2022",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"SubsCrypt",permalink:"/grants-test-repository/docs/Applications/SubsCrypt"},next:{title:"TREX - Timed Release Encryption Xing chains",permalink:"/grants-test-repository/docs/Applications/TREX_Network"}},s=[{value:"Project Overview :page_facing_up",id:"project-overview-page_facing_up",children:[{value:"Overview",id:"overview",children:[]},{value:"Project Details",id:"project-details",children:[]},{value:"Ecosystem Fit",id:"ecosystem-fit",children:[]}]},{value:"Team :busts_in_silhouette",id:"team-busts_in_silhouette",children:[{value:"Team members",id:"team-members",children:[]},{value:"Contact",id:"contact",children:[]},{value:"Legal Structure",id:"legal-structure",children:[]},{value:"Team&#39;s experience",id:"teams-experience",children:[]},{value:"Team Code Repos",id:"team-code-repos",children:[]},{value:"Team LinkedIn Profiles (if available)",id:"team-linkedin-profiles-if-available",children:[]}]},{value:"Development Status :open_book",id:"development-status-open_book",children:[]},{value:"Development Roadmap :nut_and_bolt",id:"development-roadmap-nut_and_bolt",children:[{value:"Overview",id:"overview-1",children:[]},{value:"Milestone 1 \u2014 Session",id:"milestone-1--session",children:[]},{value:"Milestone 2 GRANDPA I",id:"milestone-2-grandpa-i",children:[]},{value:"Milestone 3 GRANDPA II - Equivocations",id:"milestone-3-grandpa-ii---equivocations",children:[]}]},{value:"Future Plans",id:"future-plans",children:[]},{value:"Additional Information :heavy_plus_sign",id:"additional-information-heavy_plus_sign",children:[]}],m={toc:s};function p(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"subsembly---support-for-grandpa"},"Subsembly - Support for GRANDPA"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Team Name:")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/LimeChain"},"LimeChain")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Payment Address:")," ",(0,i.kt)("inlineCode",{parentName:"li"},"0x6eDf76FD16Bb290A544fDc14fBB4b403D1DEeD9f")," (USDT)")),(0,i.kt)("h2",{id:"project-overview-page_facing_up"},"Project Overview :page_facing_up"),(0,i.kt)("p",null,"LimeChain's team has worked on ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/w3f/General-Grants-Program/blob/master/grants/rfp-responses/subsembly-assemblyscript_runtime_framework.md"},"Subsembly - Framework for building AssemblyScript Runtimes")," and managed to deliver 4/6 milestones so far. Developers can already checkout/install the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/LimeChain/subsembly"},"Subsembly CLI")," and implement Substrate Runtimes using the framework."),(0,i.kt)("p",null,"The original goal of Subsembly was to support Aura and BABE consensus algorithms and provide the GRANDPA finality gadget. However, implementing GRANDPA and BABE turned out a harder task than initially estimated/scoped as a result the only consensus algorithm supported is Aura.\nWe would like to propose a grant amendment that enables LimeChain to continue Subsembly's development, finish the 2 outstanding milestones and propose additional features to be included."),(0,i.kt)("h3",{id:"overview"},"Overview"),(0,i.kt)("p",null,"In this project we are scoping out the development of GRANDPA and laying down the foundations for the future support of BABE.\nFor detailed information on GRANDPA, please refer to the original ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/w3f/consensus/blob/master/pdf/grandpa.pdf"},"whitepaper")," and the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/w3f/polkadot-spec/releases"},"Polkadot Host spec file"),"."),(0,i.kt)("p",null,"Generally speaking, the GRANDPA work can be divided into 3 components:"),(0,i.kt)("p",null,"1) Implementing the Runtime APIs\n2) Having support for the Runtime-to-Consensus Engine Messages\n3) Implementing required modules/pallets (session, offences)"),(0,i.kt)("h3",{id:"project-details"},"Project Details"),(0,i.kt)("h4",{id:"runtime-apis"},"Runtime APIs"),(0,i.kt)("p",null,"Subsembly must implement the following Runtime APIs to have full support for GRANDPA:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"GrandpaApi_grandpa_authorities")," - fetches the list of GRANDPA authorities according to the genesis block. Any future authority changes get tracked via Runtime-to-consensus engine messages"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"GrandpaApi_submit_report_equivocation_unsigned_extrinsic")," - Called by the Host when validator votes for multiple blocks during one voting subround"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"GrandpaApi_generate_key_ownership_proof")," - Generates proof of the membership of a key owner in a specified block state. The returned values are used to report equivocations"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"GrandpaApi_grandpa_pending_change")," - Returns information about GRANDPA pending changes")),(0,i.kt)("h4",{id:"runtime-to-consensus-engine-messages"},"Runtime-to-Consensus Engine Messages"),(0,i.kt)("p",null,"GRANDPA utilises consensus digest items for various events. The following is a list of the digest items emitted related to GRANDPA:\n",(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/12232750/128009365-e5943a13-f115-4c88-8205-e67c23920748.png",alt:"Untitled (20)"})),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Scheduled Change & Forced Change")),(0,i.kt)("p",null,"Every pallet/module has an ",(0,i.kt)("inlineCode",{parentName:"p"},"on_finalize")," hook that is called whenever a block is finalised. In the case of GRANDPA, once the ",(0,i.kt)("inlineCode",{parentName:"p"},"on_finalize")," is called, the Runtime must check whether there is a ",(0,i.kt)("inlineCode",{parentName:"p"},"PendingChange")," (forced or scheduled) that must be deposited. If there is - a new ",(0,i.kt)("inlineCode",{parentName:"p"},"DigestItem")," of type ",(0,i.kt)("inlineCode",{parentName:"p"},"Consensus")," with the ",(0,i.kt)("inlineCode",{parentName:"p"},"GRANDPA_ENGINE_ID")," must be added in the block."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"On Disabled")),(0,i.kt)("p",null,"The ConsensusLog is deposited once the Session module calls the on_disabled method. The GRANDPA module must simply deposit the log whenever it is called from the Session module."),(0,i.kt)("h4",{id:"public-functions"},"Public Functions"),(0,i.kt)("p",null,"The following public functions, eligible for calling from the client side are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"report_equivocation")," - must be a signed extrinsic"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"report_equivocation_unsigned")," - this extrinsic may not be signed. It is called by the block producer")),(0,i.kt)("h4",{id:"dependencies--prerequisites"},"Dependencies & Prerequisites"),(0,i.kt)("p",null,"It is important to note that GRANDPA relies on the Session, Offence and minimal Staking modules. The Session module is configured to have a certain range of blocks and every time ",(0,i.kt)("inlineCode",{parentName:"p"},"on_initialize")," is called, the module checks whether the ",(0,i.kt)("inlineCode",{parentName:"p"},"session")," should end. If it has to end, the module ",(0,i.kt)("inlineCode",{parentName:"p"},"rotates")," the session changing the validators."),(0,i.kt)("p",null,"The offences module tracks reported offences and the Staking module must provide the implementation of the offence - slashing the users for their misbehaviour."),(0,i.kt)("h3",{id:"ecosystem-fit"},"Ecosystem Fit"),(0,i.kt)("p",null,"Subsembly provides an alternative way for developers to build Runtimes. More specifically, it enables developers with TypeScript/JavaScript knowledge to build on top of the Substrate ecosystem."),(0,i.kt)("h2",{id:"team-busts_in_silhouette"},"Team :busts_in_silhouette"),(0,i.kt)("h3",{id:"team-members"},"Team members"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Daniel Ivanov"),(0,i.kt)("li",{parentName:"ul"},"Dastanbek Samatov"),(0,i.kt)("li",{parentName:"ul"},"Martin Petkov")),(0,i.kt)("h3",{id:"contact"},"Contact"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Contact Name:")," Daniel Ivanov"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Contact Email:")," ",(0,i.kt)("a",{parentName:"li",href:"mailto:daniel@limechain.tech"},"daniel@limechain.tech")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Website:")," ",(0,i.kt)("a",{parentName:"li",href:"https://limechain.tech"},"https://limechain.tech"))),(0,i.kt)("h3",{id:"legal-structure"},"Legal Structure"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Registered Address:")," Bulgaria, Dragan Tsankov 23A, 1113, Sofia, Bulgaria"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Registered Legal Entity:")," LimeLabs Ltd.")),(0,i.kt)("h3",{id:"teams-experience"},"Team's experience"),(0,i.kt)("p",null,"LimeChain is a blockchain development company with 100+ completed projects and strong focus on blockchain development infrastructure. LimeChain has built tools for different protocols and networks such as Ethereum, The Graph, Polkadot, EOS, Aeternity and Corda. Some of the projects LimeChain has worked with are Celo, P&G, Universe.xyz, The Graph, Dapper Labs, Hedera and Maker among others. LimeChain is also embedded into the Polkadot developer ecosystem, particularly with building AssemblyScript developer tools. The team has built a SCALE Codec implementation, Account-based AssemblyScript Runtime PoC and the Subsembly framework."),(0,i.kt)("h3",{id:"team-code-repos"},"Team Code Repos"),(0,i.kt)("p",null,"LimeChain's Substrate related repositories:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/LimeChain/subsembly"},"https://github.com/LimeChain/subsembly")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/LimeChain/subsembly-core"},"https://github.com/LimeChain/subsembly-core")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/LimeChain/as-scale-codec"},"https://github.com/LimeChain/as-scale-codec")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/LimeChain/as-substrate-runtime"},"https://github.com/LimeChain/as-substrate-runtime"))),(0,i.kt)("p",null,"Team's GitHub profiles:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/LimeChain"},"https://github.com/LimeChain")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/Daniel-K-Ivanov"},"https://github.com/Daniel-K-Ivanov")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/dastanbeksamatov"},"https://github.com/dastanbeksamatov")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/themartto"},"https://github.com/themartto"))),(0,i.kt)("h3",{id:"team-linkedin-profiles-if-available"},"Team LinkedIn Profiles (if available)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.linkedin.com/in/daniel-k-ivanov/"},"https://www.linkedin.com/in/daniel-k-ivanov/")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.linkedin.com/in/dastanbek-samatov-30ab71128/"},"https://www.linkedin.com/in/dastanbek-samatov-30ab71128/"))),(0,i.kt)("h2",{id:"development-status-open_book"},"Development Status :open_book"),(0,i.kt)("p",null,"The team already spend time on implementing GRANDPA, by updating the Subsembly CLI and spec builder to support GRANDPA authorities configuration. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/LimeChain/subsembly/blob/main/cli/src/commands/spec/builder/src/modules/grandpa.js"},"Reference")),(0,i.kt)("h2",{id:"development-roadmap-nut_and_bolt"},"Development Roadmap :nut_and_bolt"),(0,i.kt)("p",null,"Described below is a practical approach to the implementation of the GRANDPA module along with the the other auxiliary modules that are required."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Session",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Implement session period configuration (",(0,i.kt)("inlineCode",{parentName:"li"},"n")," number of blocks)"),(0,i.kt)("li",{parentName:"ol"},"Implement an ",(0,i.kt)("inlineCode",{parentName:"li"},"on_initialize")," hook called when the block is initialized. It must check whether the session must end; if it ends, ",(0,i.kt)("inlineCode",{parentName:"li"},"rotate_session")," is called."),(0,i.kt)("li",{parentName:"ol"},"Implement a service for tracking the Historical changes of session keys in order to verify proofs"),(0,i.kt)("li",{parentName:"ol"},"Implement ",(0,i.kt)("inlineCode",{parentName:"li"},"rotate_session")))),(0,i.kt)("li",{parentName:"ol"},"GRANDPA - Session",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Implement ",(0,i.kt)("inlineCode",{parentName:"li"},"on_new_session")," handler"),(0,i.kt)("li",{parentName:"ol"},"Implement ",(0,i.kt)("inlineCode",{parentName:"li"},"schedule_change")),(0,i.kt)("li",{parentName:"ol"},"Implement ",(0,i.kt)("inlineCode",{parentName:"li"},"on_finalize")," hook",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Pending changes added in the state from ",(0,i.kt)("inlineCode",{parentName:"li"},"schedule_change")," must be deposited as logs."))))),(0,i.kt)("li",{parentName:"ol"},"Session",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Implement ",(0,i.kt)("inlineCode",{parentName:"li"},"set_keys")," method. The extrinsic must be signed. The caller gets their provided ",(0,i.kt)("inlineCode",{parentName:"li"},"keys")," set into storage for eventual usage in the next sessions"),(0,i.kt)("li",{parentName:"ol"},"Implement ",(0,i.kt)("inlineCode",{parentName:"li"},"purge_keys")," method. Removes the session keys of the function caller. Takes effect after the next session starts"))),(0,i.kt)("li",{parentName:"ol"},"GRANDPA - Consensus Messages",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Add ",(0,i.kt)("inlineCode",{parentName:"li"},"on_finalize")," hook - If the current block is X, pending scheduled authority changes for the same block must be executed and an event must be deposited")))),(0,i.kt)("p",null,"At this point, the following features should be supported by the module:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Setting/changing/removing keys through the Session module"),(0,i.kt)("li",{parentName:"ul"},"Rotating sessions on every ",(0,i.kt)("inlineCode",{parentName:"li"},"n")," blocks"),(0,i.kt)("li",{parentName:"ul"},"Changing authorities if required on session rotation"),(0,i.kt)("li",{parentName:"ul"},"Depositing ",(0,i.kt)("inlineCode",{parentName:"li"},"Scheduled Change"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"Forced Change")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"Disable")," consensus logs")),(0,i.kt)("p",null,"The last part is to add support for ",(0,i.kt)("inlineCode",{parentName:"p"},"equivocations"),"."),(0,i.kt)("ol",{start:5},(0,i.kt)("li",{parentName:"ol"},"Equivocations - Reporting voter misbehaviour. The reporting of equivocations results in offences and slashe",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Implement a service for verifying the ",(0,i.kt)("inlineCode",{parentName:"li"},"equivocation_proofs")," - verifying the offender keys against the proof"),(0,i.kt)("li",{parentName:"ol"},"Implement a method for verifying the equivocation proof by making sure that both votes target different blocks and the signatures are valid"),(0,i.kt)("li",{parentName:"ol"},"Implement Reporting Service for offences that reward the sender"),(0,i.kt)("li",{parentName:"ol"},"Implement Offences module that tracks offences"),(0,i.kt)("li",{parentName:"ol"},"Implement minimal Staking module that provides an implementation for slashing ",(0,i.kt)("inlineCode",{parentName:"li"},"on_offence")," as ",(0,i.kt)("inlineCode",{parentName:"li"},"OffenceHandler"))))),(0,i.kt)("h3",{id:"overview-1"},"Overview"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Total Estimated Duration:")," 69 working days"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Full-Time Equivalent (FTE):"),"  1.5"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Total Costs:")," $45,540")),(0,i.kt)("h3",{id:"milestone-1--session"},"Milestone 1 \u2014 Session"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Estimated duration:")," 28 working days"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"FTE:"),"  1.5"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Costs:")," $18,480")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"Number"),(0,i.kt)("th",{parentName:"tr",align:null},"Deliverable"),(0,i.kt)("th",{parentName:"tr",align:null},"Specification"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"0a."),(0,i.kt)("td",{parentName:"tr",align:null},"License"),(0,i.kt)("td",{parentName:"tr",align:null},"Apache 2.0 license")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"0b."),(0,i.kt)("td",{parentName:"tr",align:null},"Documentation"),(0,i.kt)("td",{parentName:"tr",align:null},"We will provide both ",(0,i.kt)("strong",{parentName:"td"},"inline documentation")," of the module as-well as update the official ",(0,i.kt)("a",{parentName:"td",href:"https://subsembly.gitbook.io/subsembly/"},"documentation")," of Subsembly.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"0c."),(0,i.kt)("td",{parentName:"tr",align:null},"Testing Guide"),(0,i.kt)("td",{parentName:"tr",align:null},"Due to the complex nature of testing AS code, functions that have the ability to be unit tested will be fully covered to ensure functionality and robustness. In the guide, we will describe how to run these tests. We will provide testing information as-well - how one can set keys, purge them and verify that the session rotates.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"0d."),(0,i.kt)("td",{parentName:"tr",align:null},"Docker"),(0,i.kt)("td",{parentName:"tr",align:null},"We will provide a Dockerfile(s) that can be used to test the functionality delivered with this milestone.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"1."),(0,i.kt)("td",{parentName:"tr",align:null},"Session ",(0,i.kt)("inlineCode",{parentName:"td"},"period")),(0,i.kt)("td",{parentName:"tr",align:null},"We will start the work on Subsembly ",(0,i.kt)("inlineCode",{parentName:"td"},"session")," module. The end-users will be able to configure the session period configuration through the module. The period will be represented in ",(0,i.kt)("inlineCode",{parentName:"td"},"n")," number of blocks.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"2."),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"on_initialize")," hook"),(0,i.kt)("td",{parentName:"tr",align:null},"We will extend the ",(0,i.kt)("inlineCode",{parentName:"td"},"on_initialize")," hook to be calling the session's ",(0,i.kt)("inlineCode",{parentName:"td"},"on_initialize")," logic.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"3."),(0,i.kt)("td",{parentName:"tr",align:null},"Historical session service"),(0,i.kt)("td",{parentName:"tr",align:null},"We will implement a Historical session service for storing new sessions, starting sessions and ending sessions. The service will have a mechanism for proving that a given validator was part of a session at a given index.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"4."),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"rotate_session")),(0,i.kt)("td",{parentName:"tr",align:null},"We will implement the logic for rotating the session in the context of GRANDPA.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"5."),(0,i.kt)("td",{parentName:"tr",align:null},"Session ",(0,i.kt)("inlineCode",{parentName:"td"},"set_keys")," extrinsic"),(0,i.kt)("td",{parentName:"tr",align:null},"We will implement the ",(0,i.kt)("inlineCode",{parentName:"td"},"set_keys")," extrinsic. The extrinsic must be signed. The caller gets the provided ",(0,i.kt)("inlineCode",{parentName:"td"},"keys")," set in to the sotrage for the eventual usage in next the sessions")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"6."),(0,i.kt)("td",{parentName:"tr",align:null},"Session ",(0,i.kt)("inlineCode",{parentName:"td"},"purge_keys")," extrinsic"),(0,i.kt)("td",{parentName:"tr",align:null},"We will implement the ",(0,i.kt)("inlineCode",{parentName:"td"},"purge_keys")," extrinsic. Removes the session keys of the function caller. Takes effect after the next session starts.")))),(0,i.kt)("h3",{id:"milestone-2-grandpa-i"},"Milestone 2 GRANDPA I"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Estimated Duration:")," 19 working days"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"FTE:"),"  1.5"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Costs:")," $12,540")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"Number"),(0,i.kt)("th",{parentName:"tr",align:null},"Deliverable"),(0,i.kt)("th",{parentName:"tr",align:null},"Specification"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"0a."),(0,i.kt)("td",{parentName:"tr",align:null},"License"),(0,i.kt)("td",{parentName:"tr",align:null},"Apache 2.0 license")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"0b."),(0,i.kt)("td",{parentName:"tr",align:null},"Documentation"),(0,i.kt)("td",{parentName:"tr",align:null},"We will provide both ",(0,i.kt)("strong",{parentName:"td"},"inline documentation")," of the module as-well as update the official ",(0,i.kt)("a",{parentName:"td",href:"https://subsembly.gitbook.io/subsembly/"},"documentation")," of Subsembly.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"0c."),(0,i.kt)("td",{parentName:"tr",align:null},"Testing Guide"),(0,i.kt)("td",{parentName:"tr",align:null},"Due to the complex nature of testing AS code, functions that have the ability to be unit tested will be fully covered to ensure functionality and robustness. In the guide, we will describe how to run these tests. We will provide testing information as-well -  how someone can verify that sessions are being changed, as-well as verify that consensus logs are being deposited.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"0d."),(0,i.kt)("td",{parentName:"tr",align:null},"Docker"),(0,i.kt)("td",{parentName:"tr",align:null},"We will provide a Dockerfile(s) that can be used to test the functionality delivered with this milestone.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"1."),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"on_new_session")," hook"),(0,i.kt)("td",{parentName:"tr",align:null},"We will create a new GRANDPA module that will implement the ",(0,i.kt)("inlineCode",{parentName:"td"},"on_new_session")," handler.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"2."),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"schedule_change")),(0,i.kt)("td",{parentName:"tr",align:null},"We will implement the ",(0,i.kt)("inlineCode",{parentName:"td"},"schedule_change")," logic that adds a Pending Change into the state.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"3."),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"on_finalize")," hook"),(0,i.kt)("td",{parentName:"tr",align:null},"We will implement the ",(0,i.kt)("inlineCode",{parentName:"td"},"on_finalize")," hook that will be called once a block is finalized and will check whether there are pending changes that must be set deposited as consensus logs.")))),(0,i.kt)("h3",{id:"milestone-3-grandpa-ii---equivocations"},"Milestone 3 GRANDPA II - Equivocations"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Estimated Duration:")," 22 working days"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"FTE:"),"  1.5"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Costs:")," $14,520")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"right"},"Number"),(0,i.kt)("th",{parentName:"tr",align:null},"Deliverable"),(0,i.kt)("th",{parentName:"tr",align:null},"Specification"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"0a."),(0,i.kt)("td",{parentName:"tr",align:null},"License"),(0,i.kt)("td",{parentName:"tr",align:null},"Apache 2.0 license")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"0b."),(0,i.kt)("td",{parentName:"tr",align:null},"Documentation"),(0,i.kt)("td",{parentName:"tr",align:null},"We will provide both ",(0,i.kt)("strong",{parentName:"td"},"inline documentation")," of the module as-well as update the official ",(0,i.kt)("a",{parentName:"td",href:"https://subsembly.gitbook.io/subsembly/"},"documentation")," of Subsembly.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"0c."),(0,i.kt)("td",{parentName:"tr",align:null},"Testing Guide"),(0,i.kt)("td",{parentName:"tr",align:null},"Due to the complex nature of testing AS code, functions that have the ability to be unit tested will be fully covered to ensure functionality and robustness. In the guide, we will describe how to run these tests. We will provide testing information as-well -  how someone can cause equivocation by a malicious node and verify that he is receiving a reward.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"0d."),(0,i.kt)("td",{parentName:"tr",align:null},"Docker"),(0,i.kt)("td",{parentName:"tr",align:null},"We will provide a Dockerfile(s) that can be used to test all the functionality delivered with this milestone.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"0e."),(0,i.kt)("td",{parentName:"tr",align:null},"Article"),(0,i.kt)("td",{parentName:"tr",align:null},"We will publish a ",(0,i.kt)("strong",{parentName:"td"},"guide")," in the Subsembly docs file, how one can run their Substrate node that uses Subsembly Runtime having GRANDPA enabled.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"1."),(0,i.kt)("td",{parentName:"tr",align:null},"GRANDPA ",(0,i.kt)("inlineCode",{parentName:"td"},"equivocation_proofs")," service"),(0,i.kt)("td",{parentName:"tr",align:null},"We will implement a services for verifying the ",(0,i.kt)("inlineCode",{parentName:"td"},"equivocation_proofs")," - verifying the offender keys against the proof. Method for verifying the equivocation proof by making sure that both votes target different blocks and the signatures are valid.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"2."),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"reporting")," service"),(0,i.kt)("td",{parentName:"tr",align:null},"We will implementa reporting service for offences that reward the sender.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"3."),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"offences")," module"),(0,i.kt)("td",{parentName:"tr",align:null},"We will implement an ",(0,i.kt)("inlineCode",{parentName:"td"},"offences")," module that tracks offences.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"right"},"3."),(0,i.kt)("td",{parentName:"tr",align:null},"Minimal ",(0,i.kt)("inlineCode",{parentName:"td"},"staking")," module"),(0,i.kt)("td",{parentName:"tr",align:null},"We will implement a minimal ",(0,i.kt)("inlineCode",{parentName:"td"},"staking")," module that provides an implementation for slashing ",(0,i.kt)("inlineCode",{parentName:"td"},"on_offence")," as ",(0,i.kt)("inlineCode",{parentName:"td"},"OffenceHandler"))))),(0,i.kt)("h2",{id:"future-plans"},"Future Plans"),(0,i.kt)("p",null,"LimeChain will be resolving any critical bugs that may arise. We would like to extend the framework by adding new pallets in the future. Our plan is to continue the development of the framework with support for BABE and after that, having support for Parachains. The end goal of Subsembly is to support the full set of foundational features that enable developers to create Substrate networks (with the option for both Aura and BABE + GRANDPA's finality) as-well as Polkadot parathreads and parachains."),(0,i.kt)("h2",{id:"additional-information-heavy_plus_sign"},"Additional Information :heavy_plus_sign"),(0,i.kt)("p",null,"LimeChain has been a long time contributor to the Substrate ecosystem mainly focused on developer tooling. Due to our involvement in the space we are working with various clients, developing smart contracts and working on parachains."))}p.isMDXComponent=!0}}]);